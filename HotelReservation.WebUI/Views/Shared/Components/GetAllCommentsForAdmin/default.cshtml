@using System.Web
@model IEnumerable<Comment>
@{
    Layout = null;
}

<li class="nav-item dropdown d-none d-sm-block">
    <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown"><i class="fa fa-comment-o"></i> <span class="badge badge-pill bg-danger float-right">C</span></a>
    <div class="dropdown-menu notifications">
        <div class="topnav-dropdown-header">
            <span>Comments</span>
        </div>
        <div class="drop-scroll">
            <ul class="notification-list">
                @foreach (var item in Model)
                {
                    <li class="notification-message">
                        <a asp-controller="Comment" asp-action="Detail" asp-route-id="@item.Id">
                            <div class="media">
                                <div class="media-body">
                                    <p class="noti-details">
                                        <span class="noti-title">@item.NameSurname</span> added new comment
                                        @if (item.Subject.Length > 55)
                                        {
                                            <span class="noti-title">
                                                @Html.Raw(HttpUtility.HtmlDecode(More.SafeSubstring(item.Subject,55)+" ..."))
                                            </span>
                                        }
                                        else
                                        {
                                            <span class="noti-title">
                                                @Html.Raw(HttpUtility.HtmlDecode(More.SafeSubstring(item.Subject,55)))
                                            </span>
                                        }
                                    </p>
                                    <p class="noti-time"><span class="notification-time">@item.CreatedDate.ToShortDateString()</span></p>
                                    <p class="noti-time"><span class="notification-time">@item.CommentAnswers.Count() answers</span></p>
                                </div>
                            </div>
                        </a>
                    </li>
                }
            </ul>
        </div>
        <div class="topnav-dropdown-footer">
            <a asp-controller="Comment" asp-action="kurtulusocL">View all Comments</a>
        </div>
    </div>
</li>